---
import '../../shared.css'
import Nav from '../../components/Nav.astro'
import { getBlogs } from '../../db'
import Main from '../../layouts/Main.astro'
import { type BlogType } from '../../models'

export async function getStaticPaths() {
  const blogs = await getBlogs()
  return blogs.map(blog => ({ params: { id: blog.id }, props: { blog } }))
}

interface Props {
  blog: BlogType
}

const { blog } = Astro.props
---

<Main title={blog.title}>
  <Nav />
  <pre>{JSON.stringify(blog, null, 2)}</pre>
  <h1>{blog.title}</h1>
  <div set:html={blog.content_html} />
</Main>
